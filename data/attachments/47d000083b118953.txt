# Instructions

- Following Playwright test failed.
- Explain why, be concise, respect Playwright best practices.
- Provide a snippet of code with the fix, if possible.

# Test info

- Name: test deep sleep formel selection reflects correctly
- Location: /home/runner/work/Mozart-Automation/Mozart-Automation/tests/verify_deep_sleep_formel_selection_in_boxspring_configurator.spec.ts:60:1

# Error details

```
Error: locator.click: Test timeout of 60000ms exceeded.
Call log:
  - waiting for locator('button[type="submit"]').first()

    at /home/runner/work/Mozart-Automation/Mozart-Automation/tests/verify_deep_sleep_formel_selection_in_boxspring_configurator.spec.ts:64:57
```

# Page snapshot

```yaml
- alertdialog "Datenschutz-Präferenz":
  - document:
    - heading "Datenschutz-Präferenz" [level=2]
    - paragraph: Wir benötigen Ihre Einwilligung, bevor Sie unsere Website weiter besuchen können.
    - paragraph: Wir verwenden Cookies und andere Technologien auf unserer Website. Einige von ihnen sind essenziell, während andere uns helfen, diese Website und Ihre Erfahrung zu verbessern.
    - paragraph: Personenbezogene Daten können bspw. für personalisierte Werbung verarbeitet werden.
    - paragraph:
      - text: Weitere Informationen über die Verwendung Ihrer Daten finden Sie in unserer
      - link "Datenschutzerklärung"
      - text: .
    - paragraph:
      - text: Sie können Ihre Auswahl jederzeit unter
      - button "Einstellungen"
      - text: widerrufen oder anpassen.
    - button "Alles akzeptieren"
    - button "Nur essenzielle Cookies akzeptieren"
```

# Test source

```ts
   1 | import { test, expect } from '../src/fixtures/base-fixtures';
   2 | import { hardness } from "../src/testData/productBuilderTestData/hardnessAndTopper";
   3 | import { home } from "../src/testData/homeTestData/home";
   4 |
   5 | /** TC_01 Product Builder Flow Test
   6 |  *
   7 |  *  Steps:
   8 |  * 1. Navigate to the homepage URL.
   9 |  * 2. Select the postal code "PLZ 1".
   10 |  * 3. Accept cookies when prompted.
   11 |  * 4. Close any email subscription popups that appear.
   12 |  *
   13 |  * Expected Result:
   14 |  * - Homepage is successfully loaded.
   15 |  * - Correct postal code "PLZ 1" is selected.
   16 |  * - Cookies are accepted and the banner disappears.
   17 |  * - Email subscription popup is closed.
   18 |  *
   19 |  * 5. Open the "Hard Topper" tab in the product builder.
   20 |  * 6. Wait for the "Hard Topper" tab to be ready for interaction.
   21 |  * 7. Open the hardness dropdown for selecting mattress hardness.
   22 |  * 8. Wait for the dropdown to load available options.
   23 |  * 9. Select hardness for Mattress 1 (e.g., "H3").
   24 |  * 10. Select hardness for Mattress 2 (e.g., "H4").
   25 |  * 11. Click on the "Save" button to save the selected hardness levels.
   26 |  * 12. Wait for the page to confirm the saved hardness levels.
   27 |  * 13. Select the anti-allergic cover option.
   28 |  * 14. Click "Continue to Upgrades" to proceed.
   29 |  *
   30 |  * Expected Result:
   31 |  * - "Hard Topper" tab opens and shows available hardness options.
   32 |  * - Mattress 1 and Mattress 2 hardness levels are selected successfully.
   33 |  * - Anti-allergic cover is selected and saved.
   34 |  * - User is navigated to the "Upgrades" page.
   35 |  *
   36 |  * 15. Wait for the Upgrades page to load.
   37 |  * 16. Select the "Electricity Adjustable" option.
   38 |  * 17. Click "Continue to Accessories" to move to the next page.
   39 |  * 18. Wait for the Accessories page to load.
   40 |  * 19. Select the fabric option for the nightstand.
   41 |  * 20. Click "Continue to Overview" to view the summary of selections.
   42 |  *
   43 |  * Expected Result:
   44 |  * - The "Upgrades" page is displayed and the adjustable option is selected.
   45 |  * - The "Accessories" page loads and the nightstand fabric option is selected.
   46 |  * - User is navigated to the "Overview" page.
   47 |  *
   48 |  * 21. Wait for the Overview page to load.
   49 |  * 22. Validate that the correct mattress hardness levels are displayed for Mattress 1 and Mattress 2.
   50 |  * 23. Validate that the selected anti-allergic cover, electricity adjustable, and nightstand fabric options are listed.
   51 |  * 24. Check that all the data matches the user's selections.
   52 |  *
   53 |  * Expected Result:
   54 |  * - The Overview page displays the correct mattress hardness for both mattresses.
   55 |  * - The anti-allergic cover, electricity adjustable, and nightstand fabric selections are visible and correct.
   56 |  * - All options are validated against the user's previous selections.
   57 |  */
   58 |
   59 |
   60 | test('test deep sleep formel selection reflects correctly', async ({ page, homePage, productBuilder, hardnessPage, upgradesPage, accessoriesPage, overviewPage }) => {
   61 |     await homePage.visit(home.url);
   62 |     await homePage.waitForReadiness();
   63 |     
>  64 |     await page.locator('button[type="submit"]').first().click({force: true});
      |                                                         ^ Error: locator.click: Test timeout of 60000ms exceeded.
   65 |
   66 |    // const plzButton = page.locator('button:has-text("PLZ 1")'); // or use "PLZ 1..." if exact text needed
   67 |    //  if (await plzButton.isVisible()) {
   68 |    //      await plzButton.click();
   69 |    //  }
   70 |
   71 |     const acceptCookies = page.getByRole('button', { name: 'Alles akzeptieren' });
   72 |     if (await acceptCookies.isVisible()) {
   73 |         await acceptCookies.click();
   74 |     }
   75 |
   76 |     // await homePage.selectPostalCode(home.postcode);
   77 |     // await homePage.acceptCookies();
   78 |     // await homePage.closeEmailPopup();
   79 |
   80 |     await productBuilder.openHardTopperTab();
   81 |     await productBuilder.waitForReadiness();
   82 |     await hardnessPage.openHardnessDropdown();
   83 |     await hardnessPage.waitForReadiness();
   84 |     await hardnessPage.selectHardnessForMattress1(hardness.mattress1);
   85 |     await hardnessPage.selectHardnessForMattress2(hardness.mattress2);
   86 |     await hardnessPage.saveHardnessLevel();
   87 |     await hardnessPage.waitForReadiness();
   88 |     await hardnessPage.selectAntiAllergicCoverOption();
   89 |     await hardnessPage.continueToUpgrades();
   90 |
   91 |     await upgradesPage.waitForReadiness();
   92 |     await upgradesPage.selectElectricityAdjustableOption();
   93 |     await upgradesPage.continueToAccessories();
   94 |     await upgradesPage.waitForReadiness();
   95 |
   96 |     await accessoriesPage.waitForReadiness();
   97 |     await accessoriesPage.selectNightstandFabric();
   98 |     await accessoriesPage.continueToOverview()
   99 |
  100 |     await overviewPage.waitForReadiness();
  101 |     const overviewData = await overviewPage.getHardnessLevelData();
  102 |     await expect(overviewData).toContainText(hardness.mattress1);
  103 |     await expect(overviewData).toContainText(hardness.mattress2);
  104 | })
  105 |
```